# Настройка Email в Supabase

## Проблема
Supabase по умолчанию требует подтверждение email при регистрации. Если email не настроен или заблокирован, пользователи не смогут войти после регистрации.

## Решение 1: Отключить подтверждение email (для разработки)

### В Supabase Dashboard:
1. Откройте ваш проект в [Supabase Dashboard](https://app.supabase.com)
2. Перейдите в **Authentication** → **Settings**
3. Найдите раздел **Email Auth**
4. Отключите опцию **"Enable email confirmations"**
5. Сохраните изменения

После этого пользователи смогут сразу входить после регистрации без подтверждения email.

## Решение 2: Настроить отправку email (для продакшена)

### Вариант A: Использовать встроенный SMTP Supabase
1. В Supabase Dashboard перейдите в **Settings** → **Auth**
2. Найдите раздел **SMTP Settings**
3. Настройте SMTP сервер (Gmail, SendGrid, Mailgun и т.д.)
4. Включите **"Enable email confirmations"**

### Вариант B: Использовать локальный Supabase
Если используете локальный Supabase, настройте в `supabase/config.toml`:

```toml
[auth.email]
enable_signup = true
double_confirm_changes = false
enable_confirmations = false  # Отключить подтверждение для разработки
```

## Решение 3: Использовать тестовые email (для разработки)

Supabase позволяет использовать любые email адреса в режиме разработки без реальной отправки писем. Просто убедитесь, что подтверждение email отключено.

## Текущая настройка в коде

В файле `src/contexts/AuthContext.tsx` регистрация настроена так:
- Email redirect URL установлен на `window.location.origin`
- Профиль создается даже если email не подтвержден
- Пользователь может войти после подтверждения email или если подтверждение отключено

## Рекомендации

- **Для разработки**: Отключите подтверждение email в Dashboard
- **Для продакшена**: Настройте SMTP и включите подтверждение email
- **Для тестирования**: Используйте тестовые email адреса

## Проверка

После настройки попробуйте зарегистрировать нового пользователя. Если все настроено правильно:
- Профиль должен создаться успешно
- Пользователь должен получить сессию (если подтверждение отключено)
- Или получить письмо с подтверждением (если подтверждение включено)

